<Project Sdk="Microsoft.NET.Sdk.Web">

	<PropertyGroup>
		<TargetFramework>net9.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
	</PropertyGroup>

	<ItemGroup>
		<PackageReference Include="Dapper" Version="*" />
		<PackageReference Include="Microsoft.AspNetCore.Authentication.JwtBearer" Version="9.0.2" />
		<PackageReference Include="Microsoft.Data.SqlClient" Version="*" />
		<PackageReference Include="Swashbuckle.AspNetCore" Version="*" />
	</ItemGroup>

	<PropertyGroup>
		<SpaDistPath>$(MSBuildProjectDirectory)/../frontend/dist</SpaDistPath>
	</PropertyGroup>

	<Target Name="CopySpaDistToWwwroot" AfterTargets="Publish" Condition="Exists('$(SpaDistPath)')">
		<Message Text="Copying SPA from $(SpaDistPath) to $(PublishDir)wwwroot" Importance="High" />
		<MakeDir Directories="$(PublishDir)wwwroot" />
		<ItemGroup>
			<SpaDistFiles Include="$(SpaDistPath)/**" />
		</ItemGroup>
		<Copy SourceFiles="@(SpaDistFiles)"
			DestinationFiles="@(SpaDistFiles->'$(PublishDir)wwwroot/%(RecursiveDir)%(Filename)%(Extension)')"
			SkipUnchangedFiles="true" />
	</Target>
</Project>
